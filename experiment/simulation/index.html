<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>SOLVE - Mechanics of Machines Lab - Governor </title>
	<link rel="stylesheet" href="css/MOMstyle.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
	<!-- <script src='http://ajax.googleapi.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script> -->
	<!-- <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js'></script> -->
	<!-- <script type="text/javascript" src= "images/MOMscript.js"></script> -->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui.min.js"></script>
	<script type="application/json" src='js/jquery.min.map'></script>

	<script type="text/javascript" src="js/MOMscript.js"></script>
	<script src="js/graph.ob.js"></script>
	<script src="js/graph_use.ob.js"></script>
	<script src="js/graph_use2.ob.js"></script>
	<script
	defer
	type="text/javascript"
	src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"
></script>
	<link href="css/mathstyle.css" rel="stylesheet" />
	<link href="./css/responsive.css" rel="stylesheet" />
</head>

<body onload="editcss(); startsim(); varinit();printcomment();">

	<noscript>
		The simulation requires JavaScript to be enabled.
	</noscript>

	<div class="parentContainer">

		<div class="imgBox">
			<img src="./images/logo.png" alt="logo" height="70px" width="80px" />
			<div id="simtitle">Porter Governor</div>
		</div>

		<div class="expBody">
			<div class="sidebar">
				<ul class="tool-menu">
					<li class="tool-list">
						<a href="#simulation" class="tool-link" id="stimul" title="Simulation"><svg
								xmlns="http://www.w3.org/2000/svg" fill="#089B93" viewBox="0 0 24 24" stroke-width="1.5"
								stroke="#ffffff" class="icons">
								<path stroke-linecap="round" stroke-linejoin="round"
									d="M3 8.25V18a2.25 2.25 0 002.25 2.25h13.5A2.25 2.25 0 0021 18V8.25m-18 0V6a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6zM7.5 6h.008v.008H7.5V6zm2.25 0h.008v.008H9.75V6z" />
							</svg>
						</a>
						<span>Simulation</span>
					</li>
					<li class="tool-list">
						<a href="#variables" class="tool-link" title="Variables">
							<svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 24 24"
								stroke-width="1.5" stroke="#089B93" class="icons">
								<path stroke-linecap="round" stroke-linejoin="round"
									d="M4.745 3A23.933 23.933 0 003 12c0 3.183.62 6.22 1.745 9M19.5 3c.967 2.78 1.5 5.817 1.5 9s-.533 6.22-1.5 9M8.25 8.885l1.444-.89a.75.75 0 011.105.402l2.402 7.206a.75.75 0 001.104.401l1.445-.889m-8.25.75l.213.09a1.687 1.687 0 002.062-.617l4.45-6.676a1.688 1.688 0 012.062-.618l.213.09" />
							</svg>
						</a>
						<span>Variables</span>
					</li>
					<li class="tool-list">
						<a href="#controls" class="tool-link" title="Comments">
							<svg width="11.655954mm" height="11.110571mm" viewBox="0 0 11.655954 11.110571"
								version="1.1" id="svg1" inkscape:version="1.3 (0e150ed6c4, 2023-07-21)"
								sodipodi:docname="settings.svg" inkscape:export-filename="settings.svg"
								inkscape:export-xdpi="96" inkscape:export-ydpi="96"
								xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
								xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
								xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
								<sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000"
									borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0"
									inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1"
									inkscape:document-units="mm" inkscape:zoom="1.9830139" inkscape:cx="176.75116"
									inkscape:cy="510.08215" inkscape:window-width="1920" inkscape:window-height="1001"
									inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="1"
									inkscape:current-layer="layer1" />
								<defs id="defs1" />
								<g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1"
									transform="translate(-41.780725,-129.40199)">
									<path
										style="opacity:0.99;fill:#e2e8f0;stroke:#fafffe;stroke-width:0.3;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
										d="m 53.283207,131.63658 c 0.0665,-1.09363 -0.83388,-2.0402 -1.91841,-2.02139 l -7.5608,-0.0632 c -0.89457,0.0108 -1.731755,0.58444 -1.805563,1.51605 l -0.06771,7.93816 c 0.0028,0.74142 0.267311,1.29744 1.089383,1.35637 l 8.72837,-0.0298 c 1.01826,-0.007 1.64199,-0.14246 1.51216,-1.62132 z"
										id="path1079-0" sodipodi:nodetypes="ccccccccc"
										inkscape:export-filename="controls" inkscape:export-xdpi="96"
										inkscape:export-ydpi="96" />
									<path
										style="fill:none;stroke:#cacaca;stroke-width:0.0811258;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
										d="m 42.797506,138.45275 3.200622,-2.84211 v -1.63887 l 0.930063,-0.9568 1.422713,-0.039 v 0.33193 l -0.869045,0.89204 0.890242,0.91279 0.932632,-0.72609 0.381526,-0.12447 -0.08479,1.28621 -1.038612,1.05801 -1.6533,-0.0208 -2.649518,2.8421 -0.996224,0.083 -0.275546,-0.24894 z"
										id="path24" sodipodi:nodetypes="ccccccccccccccccc" />
									<path id="path3"
										style="fill:#008080;fill-opacity:1;stroke:#fff3f3;stroke-width:0.00269467;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1"
										d="m 48.320419,133.01634 -0.598838,0.013 c -0.329333,0.007 -0.63921,0.0181 -0.688698,0.0241 -0.08522,0.0103 -0.114209,0.0357 -0.545897,0.47769 l -0.455804,0.46679 -10e-4,0.82336 -9.53e-4,0.82335 -1.580338,1.40037 c -0.869191,0.77016 -1.584675,1.41058 -1.589858,1.4232 -0.0052,0.0127 0.02942,0.19001 0.07686,0.39418 l 0.08626,0.37123 0.132004,0.11942 h 1.19e-4 c 0.130781,0.11828 0.133043,0.11943 0.238003,0.10875 0.05829,-0.006 0.272921,-0.0247 0.476934,-0.0416 l 0.370936,-0.0308 0.06363,-0.0697 c 0.02424,-0.0266 0.318033,-0.34248 0.727037,-0.78175 0.181097,-0.1945 0.384779,-0.4132 0.597651,-0.64169 l 1.261182,-1.35366 0.826625,0.0143 0.826739,0.0143 0.510487,-0.52384 0.510602,-0.52394 0.03773,-0.5886 c 0.02075,-0.32373 0.03344,-0.59268 0.02821,-0.59781 -0.0052,-0.005 -0.07641,0.013 -0.158243,0.0402 -0.129589,0.0431 -0.209768,0.097 -0.621709,0.41782 -0.333003,0.25932 -0.481086,0.36278 -0.500386,0.34975 -0.03275,-0.0222 -0.906762,-0.92003 -0.913931,-0.93892 -0.0028,-0.007 0.194938,-0.2185 0.439318,-0.46952 l 0.444427,-0.45645 4.75e-4,-0.13169 z"
										sodipodi:nodetypes="ccscccccsccccscccsccccccsssssscccc" />
									<path
										style="fill:#008080;fill-opacity:1;stroke:#fff3f3;stroke-width:0.00190541;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1"
										d="m 47.186062,138.62222 c -0.06349,-0.32364 -0.117516,-0.59048 -0.120063,-0.59296 -0.0025,-0.003 -0.287832,-0.0382 -0.633965,-0.0792 -0.346134,-0.0411 -0.6375,-0.0763 -0.647481,-0.0781 -0.01,-0.002 0.242889,-0.28335 0.56193,-0.62551 l 0.580075,-0.62211 0.826935,0.009 0.826935,0.009 0.528681,-0.53694 0.528679,-0.53696 0.04143,-0.61779 c 0.02279,-0.33979 0.04174,-0.64535 0.04213,-0.67903 l 7.02e-4,-0.0613 -0.221072,0.0727 -0.221073,0.0727 -0.449638,0.35188 -0.449639,0.35187 -0.179855,-0.18133 c -0.09892,-0.0997 -0.288841,-0.29316 -0.422045,-0.42985 l -0.24219,-0.24852 0.425792,-0.43756 0.425792,-0.43755 v -0.195 -0.19502 l -0.05621,0.006 c -0.03092,0.003 -0.363083,0.0128 -0.738157,0.0219 l -0.681952,0.0163 -0.210296,0.21512 c -0.115663,0.11832 -0.329574,0.33725 -0.475359,0.4865 l -0.265063,0.27139 -7.84e-4,0.82147 -7.85e-4,0.82147 -0.655446,0.58167 c -0.578512,0.51341 -0.656643,0.57797 -0.66565,0.5501 -0.0056,-0.0174 -0.05554,-0.23952 -0.110955,-0.49367 -0.05541,-0.25414 -0.10815,-0.4694 -0.117193,-0.47835 -0.009,-0.009 -0.259246,-0.0506 -0.556008,-0.0925 -0.296761,-0.0419 -0.580769,-0.083 -0.631126,-0.0913 l -0.09156,-0.015 -0.01096,-0.54272 c -0.0061,-0.29851 -0.0081,-0.54562 -0.0044,-0.54914 0.0036,-0.004 0.309034,-0.0657 0.678742,-0.13817 0.369708,-0.0724 0.676818,-0.13675 0.682469,-0.14283 0.01221,-0.0131 0.283629,-0.87161 0.283629,-0.89707 0,-0.0142 -0.338378,-0.48059 -0.646801,-0.8916 l -0.05701,-0.076 0.457113,-0.4081 c 0.251412,-0.22446 0.463541,-0.41024 0.471398,-0.41286 0.0079,-0.003 0.232714,0.10462 0.499685,0.2383 l 0.485402,0.24306 0.462999,-0.10468 c 0.25465,-0.0575 0.469744,-0.11266 0.477988,-0.12242 0.0082,-0.01 0.06507,-0.31083 0.12629,-0.66905 0.06122,-0.35821 0.113134,-0.6537 0.115372,-0.65664 0.0023,-0.003 0.297528,0.003 0.656198,0.0135 0.437378,0.0126 0.654048,0.024 0.657962,0.0346 0.0032,0.008 0.05178,0.28323 0.107938,0.60999 l 0.102103,0.59413 0.455171,0.12977 c 0.299482,0.0854 0.461434,0.12513 0.473479,0.11616 0.168375,-0.12525 0.911141,-0.64938 0.92027,-0.64938 0.0068,0 0.213971,0.19728 0.460228,0.43839 0.323345,0.31661 0.444256,0.44396 0.435199,0.45841 -0.0069,0.011 -0.137044,0.19813 -0.289211,0.41583 -0.152169,0.2177 -0.27636,0.40253 -0.275981,0.41074 0.0011,0.0237 0.452708,0.93868 0.465195,0.94253 0.01143,0.004 1.144096,0.16511 1.157811,0.16517 0.01288,6e-5 -0.04938,1.25381 -0.06271,1.26259 -0.0069,0.005 -0.277606,0.0534 -0.601469,0.10865 l -0.588841,0.10033 -0.193028,0.41938 c -0.106166,0.23065 -0.199497,0.43614 -0.207403,0.45664 -0.01287,0.0334 0.01837,0.0885 0.299645,0.52869 l 0.314017,0.49142 -0.392567,0.39253 -0.392568,0.39253 -0.442069,-0.27205 c -0.243138,-0.14962 -0.45175,-0.27205 -0.463582,-0.27205 -0.04383,0 -1.035189,0.29031 -1.045134,0.30606 -0.0057,0.009 -0.04936,0.26561 -0.09707,0.57026 -0.04771,0.30466 -0.09024,0.56878 -0.09452,0.58692 l -0.0078,0.033 -0.60164,-5e-5 -0.60164,-7e-5 z"
										id="path4" />
									<path
										style="fill:none;stroke:#eadcdc;stroke-width:0.347841;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
										d="m 44.627028,136.85622 -0.239806,-1.07962 -1.292965,-0.1867 -0.02119,-1.16174 1.37775,-0.26969 0.275552,-0.87129 -0.720673,-0.97503 0.975027,-0.8713 0.996217,0.49788 0.911434,-0.20745 0.233157,-1.34844 1.37775,0.0415 0.211967,1.22397 0.869038,0.24894 0.953829,-0.68459 0.953829,0.93353 -0.593493,0.85055 0.445117,0.9128 1.186987,0.16596 -0.06359,1.3277 -1.208177,0.20745 -0.40273,0.8713 0.635888,0.99577 -0.826651,0.82982 -0.911434,-0.56013 -1.017421,0.29043 -0.190763,1.20323 h -1.271765 l -0.233158,-1.18248 -1.355309,-0.16137"
										id="path23" sodipodi:nodetypes="cccccccccccccccccccccccccccccc"/>
								</g>
							</svg>
						</a>
						<span>Controls</span>
					</li>
					<!-- <li class="tool-list">
						<img id="playpausebutton" onclick="togglePlayPause()" src="./images/blueplaydull.svg" alt=""
							class="icons" />
						<span class="playPause">Play</span>
					</li> -->
					<li class="tool-list" id="graphListItem">
						<img id="graphbutton" class="" style="cursor: pointer;" onclick="drawgraphh()"
							src="./images/graphbutton (1).svg" alt="" class="icons" />
						<span>Graph</span>
					</li>
				</ul>
			</div>
			<div class="mainSection">
				<div id="firstRow">
					<div class="firstCol">
						<div class="inner-box" id="simulation">
							<p class="box-title">Simulation</p>
							<div style="width: 100%;">
								<div class="imageRow">
									<canvas id="simscreen" height="400px"></canvas>
									<div class="imgGraph">
										<p id="fb"
											style="font-size:20px; font-weight:bold; font-family: sans-serif; text-align: center;">
											Free
											Body Diagram</p>
										<p id="eqn" style="font-size: 24px; font-family: Comic Sans MS;display:none">
											N<sup>2</sup>
											&alpha; <span
												class="frac"><sup>1</sup><span>&frasl;</span><sub>h</sub></span>
										</p>

										<!-- Used mathstyle.css file to display equation -->
										<img src="images/FBD_porter.png" id="myImg" style="height:380px;" />
										<div id="graph" style="width:300px;height:300px;display: none;"></div>
									</div>
								</div>
								<div class="textRow">
									<div id="commentboxleft"></div>
									<div id="commentboxright"></div>
								</div>
							</div>
						</div>
						<!-- Experiments Questions Section -->
						<div id="exp" class="fontClass">
							<fieldset>
								<legend id="expTitle" class="fontClass">Choose one of the experiments</legend>
								<ul type="none" class="fontClass">
									<li><input type="radio" id="calc" name="expt" value="calc"
											autocomplete="off">Calculation
									</li>
									<li><input type="radio" id="gParts" name="expt" value="gParts"
											autocomplete="off">Identify
										Parts
										of
										Governor</li>
								</ul>
							</fieldset>
						</div>
					</div>


					<div class="secondColumn">
						<div id="variables">
							<div class="inner-box variablesBox">
								<p id="vartitle" class="box-title" style="width:-webkit-fill-available;">Variables</p>
								<div id="mset" class="variable">
									<div class="varname">
										<p title="Input Angular Velocity">n&nbsp;</p>
										<input id="nspinner" disabled></input>
										<p id="rpm">rpm</p>
										
									</div>
									
									<div id="nslider"></div>
									
								</div>

								<div id="massset" class="variable">
									<div class="varname">
										<p title="Input Angular Velocity">mass&nbsp;</p>
										<input id="massspinner" disabled></input>
										<p id="kg">kg</p>
									</div>
									<div id="massslider"></div>
								</div>


								<div id="nset" class="variable">
									<div class="varname">
										<p title="Height of the Governor">Height(mm)&nbsp; </p>
										<input id="hval" type="textbox"
											style="background-color:white;width:60px;color:black;margin-bottom:20px"
											disabled></input>
									</div>
								</div>
							</div>
						</div>
						<div id="controls">
							<div class="inner-box controlsBox">
								<p id="ctrltitle" class="box-title" style="width:-webkit-fill-available;">Controls</p>
								<div class="usercheck" style="display: flex; opacity: 0;gap:10px">
									<input type="checkbox" id="cb" onclick="drawgraphh()" />
									<p id="sg">Show Graph</p>
								</div>
								<div class="buttonSet">
									<div>
										<input type="button" id="goToExperiment" onclick="setExperiments();"
											value="Go to Experiment" />
										<!-- To select the experiments -->
									</div>
									<div>
										<input type="button" id="startExperiment" onclick="startExperiments();"
											value="Start Experiment" />
										<!-- To start with experiments -->
									</div>
									<div>
										<input type="button" id="exitExperiment" onclick="exitExperiments();"
											value="Exit Experiment" />
										<!-- To exit from experiments -->
									</div>
									<div>
										<input type="button" id="goSimulator" onclick="goToSimulator();"
											value="Go To Simulator" />
										<!-- To exit from experiments -->
									</div>
									<div>
										<input type="button" id="resetExperiment" onclick="resetExperiments();"
											value="Reset Experiment" />
										<!-- To reset experiments -->
									</div>


								</div>
							</div>
						</div>
					</div>


				</div>




				<!-- Questions Division -->
				<div id="questionsSet" class="fontClass">
					<div id="qHeight" class="questionDivision">
						<label for="calcHeight">Find the Height(mm): <input id="calcHeight" type="text"
								autocomplete="off" value="" oninput="resetValues();"><span id="hspan"></span></label>
						<label for="check1"><input id="check1" type="button" value="CHECK" onclick="evalHeight()" />
					</div>
					<div id="qMass" class="questionDivision">
						<label for="calcMass">Find the Mass(kg): <input id="calcMass" type="text" autocomplete="off"
								value="" oninput="resetValues();"><span id="mspan"></span></label>
						<label for="check2"><input id="check2" type="button" value="CHECK" onclick="evalMass()" />
					</div>
					<div id="qRpm" class="questionDivision">
						<label for="calcRpm">Find the n(rpm): <input id="calcRpm" type="text" autocomplete="off"
								value="" oninput="resetValues();"><span id="rspan"></span></label>
						<label for="check3"><input id="check3" type="button" value="CHECK" onclick="evalRpm()" />
					</div>
				</div>
				<!-- Pivot  -->
				<!-- Fly Ball -->
				<!-- Connecting Rod -->
				<!-- Spindle -->
				<!-- Sleeve -->
				<!-- Extended Arm -->
				<!-- Arm -->
				<div id="dropDownSet">
					<img src="images/expImage.png" id="partImage" style="display:none" />
					<p class="fontClass" id="partTitle">Identify Parts of Governor</p>
					<div id="dropPivot">
						<select id="pivot" onchange="evaluateParts(this);">
							<option></option>
							<option>Fly Ball</option>
							<option>Spindle</option>
							<option>Pivot</option>
							<option>Extended Arm</option>
						</select>
					</div>
					<div id="dropFlyBall">
						<select id="flyBall" onchange="evaluateParts(this);">
							<option></option>
							<option>Arm</option>
							<option>Pivot</option>
							<option>Spindle</option>
							<option>Fly Ball</option>
						</select>
					</div>
					<div id="dropSleeve">
						<select id="sleeve" onchange="evaluateParts(this);">
							<option></option>
							<option>Extended Arm</option>
							<option>Spindle</option>
							<option>Connecting Rod</option>
							<option>Sleeve</option>
						</select>
					</div>
					<div id="dropSpindle">
						<select id="spindle" onchange="evaluateParts(this);">
							<option></option>
							<option>Pivot</option>
							<option>Spindle</option>
							<option>Fly Ball</option>
							<option>Arm</option>
						</select>
					</div>
					<div id="dropConnectingRod">
						<select id="connectingRod" onchange="evaluateParts(this);">
							<option></option>
							<option>Extended Arm</option>
							<option>Arm</option>
							<option>Connecting Rod </option>
							<option>Sleeve</option>
						</select>
					</div>
					<div id="dropArm">
						<select id="arm" onchange="evaluateParts(this);">
							<option></option>
							<option>Spindle</option>
							<option>Arm</option>
							<option>Pivot</option>
							<option>Fly Ball</option>
						</select>
					</div>
				</div>

				<!-- <div id="titleincanvas"></div> -->

				<div class="footerBox	">
					<div id="copyright" title="Developer : Bijay Swarnkar"> Copyright &copy; SOLVE The Virtual Lab @
						NITK
						Surathkal
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		// play pause button function
		// function togglePlayPause() {
		// 	const playPauseBtn = document.getElementById("playpausebutton");
		// 	let playPauseText = document.getElementsByClassName("playPause")[0];
		// 	console.log(playPauseText);

		// 	if(playPauseBtn.src.includes("blueplaydull")){
		// 		playPauseBtn.src = "./images/bluepausedull.svg";
		// 		playPauseText.innerHTML = "Pause";
		// 	} else {
		// 		playPauseBtn.src = "./images/blueplaydull.svg";
		// 		playPauseText.innerHTML = "Play";
		// 	}
		// }


		var simstatus = 0;
		var rotstatus = 1;

		var commenttext = "Some Text";
		var commentloc = 0;

		var trans = new point(150, 100);
		var transa = new point(150, 230);
		var transaa = new point(200, 400);


		var y = new point(0, 0, "y");
		var z = new point(0, 0, "z");
		var o = new point(0, 0, " ");
		var a = new point(0, 0, " ");
		var b = new point(0, 0, " ");
		var d = new point(0, 0, "d");
		var c = new point(0, 0, "c");
		var c1 = new point(0, 0, "");
		var c2 = new point(0, 0, "");
		var e = new point(0, 0, " ");
		var f = new point(0, 0, " ");
		var ii = new point(0, 0, "ii");
		var k = new point(0, 0, "k");
		var l = new point(0, 0, "S");
		var v = new point(0, 0, "v");
		var va = new point(0, 0, "va");

		var h1 = 0;
		var om1 = 0;
		var theta = 0;
		var omega = 0;;
		var r = 0;
		var h = 0;
		var m = 4;
		var m1 = 20;
		var r1 = 0;
		var g = 0;
		var r2 = 0;
		var r3 = 0;
		var n = 130;

		var canvas = document.getElementById("simscreen");
		var ctx = canvas.getContext("2d");
		//Array to hold datapoints to plot graph
		var datapoints1 = [];

		//rotation variables
		var gr = 0;


		var time = 0;

		//To set color
		var colorGraph = "#35b1d0";
		document.getElementById("cb").checked = false;
		var exptSelected = 0;//For experiments
		var randCal = 0;// for choosing calculation
		var userHeight = 0, userMass = 0, userRpm = 0;//User entered values
		var randomRpm = 0, randomHeight = 0, randomOmega = 0;
		var dropArray = [3, 4, 4, 2, 3, 2];
		var countSpan = 0;
		var ansSpan0 = document.createElement("span");
		var ansSpan1 = document.createElement("span");
		var ansSpan2 = document.createElement("span");
		var ansSpan3 = document.createElement("span");
		var ansSpan4 = document.createElement("span");
		var ansSpan5 = document.createElement("span");
		function editcss() {
			//$('.variable').css('padding-top', '30px');
			$('.usercheck').css('left', '40px');
			// <!-- $('#legend').css("width",document.getElementById('legendimg').width+"px"); -->
			// <!-- $('#legend').css("top",419); -->
			// <!-- $('#legend').css("left",342); -->
			$('#container').css("top", 0);
			$('#container').css("left", 0);
			// <!-- $('#legendicon').css("top",471); -->
		}

		function startsim() {
			simTimeId = setInterval("time=time+0.6; varupdate(); ", 8);
		}

		function varinit() {
			varchange();
			$('#nslider').slider("value", 130);
			$('#nspinner').spinner("value", 130);

			$('#massslider').slider("value", 5);
			$('#massspinner').spinner("value", 5);

		}

		function varchange() {
			//Variable omega2 slider and number input types
			$('#nslider').slider({ max: 180, min: 130, step: 2 });		// slider initialisation : jQuery widget
			$('#nspinner').spinner({ max: 180, min: 130, step: 2 });		// number initialisation : jQuery widget
			// monitoring change in value and connecting slider and number
			// setting trace point coordinate arrays to empty on change of link length
			$("#nslider").on("slide", function (e, ui) { $('#nspinner').spinner("value", ui.value); colorGraph = "#35b1d0"; sliderGraph(); });
			$("#nspinner").on("spin", function (e, ui) { $('#nslider').slider("value", ui.value); colorGraph = "#35b1d0"; sliderGraph(); });
			$("#nspinner").on("change", function () { varchange(); });

			//Variable omega2 slider and number input types
			$('#massslider').slider({ max: 6, min: 2, step: 0.5 });		// slider initialisation : jQuery widget
			$('#massspinner').spinner({ max: 6, min: 2, step: 0.5 });		// number initialisation : jQuery widget
			// monitoring change in value and connecting slider and number
			// setting trace point coordinate arrays to empty on change of link length
			$("#massslider").on("slide", function (e, ui) { $('#massspinner').spinner("value", ui.value); colorGraph = "#a23827"; sliderGraph(); });
			$("#massspinner").on("spin", function (e, ui) { $('#massslider').slider("value", ui.value); colorGraph = "#a23827"; sliderGraph(); });
			$("#massspinner").on("change", function () { varchange(); });

			varupdate();
		}

		function varupdate() {
			n = $('#nspinner').spinner("value");
			m = $('#massspinner').spinner("value");
			omega = (2 * 3.14 * n) / 600;
			theta = theta + (rotstatus * 0.05 * deg(omega));
			theta = theta % 360;
			if (theta < 0) theta += 360; a
			h = (m + m1) * 9.81 / (omega * omega * m);
			g = (80 * 80) - (h * h);
			r1 = Math.sqrt(g);
			r2 = r1 * Math.cos(rad(theta));
			r3 = 10 * Math.cos(rad(theta));
			o.xcoord = 0;
			o.ycoord = 0;
			z.xcoord = 10 * Math.cos(rad(theta));
			z.ycoord = 10 * Math.sin(rad(theta));
			y.xcoord = -10 * Math.cos(rad(theta));
			y.ycoord = -10 * Math.sin(rad(theta));
			c.xcoord = 0;
			c.ycoord = 0;
			c1.xcoord = 8 * Math.cos(rad(theta));
			c1.ycoord = 0;
			c2.xcoord = -8 * Math.cos(rad(theta));
			c2.ycoord = 0;
			d.xcoord = 0;
			e.xcoord = r2;
			e.ycoord = -h;
			f.xcoord = -r2;
			f.ycoord = -h;
			d.ycoord = -2 * h;
			ii.xcoord = r3;
			ii.ycoord = -2 * h;
			k.xcoord = -r3;
			k.ycoord = -2 * h;
			l.xcoord = 0;
			l.ycoord = -2 * h - 30;
			v.xcoord = r3
			v.ycoord = -2 * h - 30;
			va.xcoord = -r3;
			va.ycoord = -2 * h - 30;
			a.xcoord = r1 * Math.cos(rad(theta));
			a.ycoord = r1 * Math.sin(rad(theta));
			b.xcoord = -r1 * Math.cos(rad(theta));
			b.ycoord = -r1 * Math.sin(rad(theta));
			document.getElementById("hval").value = ((h * 10)).toFixed(3);//To update the height field as per the updated n value
			draw();
		}

		function draw() {
			ctx.clearRect(0, 0, 550, 400);  //clears the complete canvas#simscreen everytime

			pointtrans(o, trans);
			pointtrans(b, trans);
			pointtrans(a, trans);
			pointtrans(z, trans);
			pointtrans(y, trans);
			pointtrans(c, transa);
			pointtrans(c1, transa);
			pointtrans(c2, transa);
			pointtrans(d, transa);
			pointtrans(e, transa);
			pointtrans(f, transa);
			pointtrans(ii, transa);
			pointtrans(k, transa);
			pointtrans(l, transa);
			pointtrans(v, transa);
			pointtrans(va, transa);


			ctx.beginPath();
			ctx.closePath();
			ctx.beginPath();
			ctx.lineWidth = 1;
			ctx.strokeStyle = "#666666";
			//ctx.setLineDash([5, 15]);

			ctx.moveTo(150, o.xcoord);
			ctx.lineTo(150, -400);
			ctx.lineTo(150, 400);
			ctx.moveTo(150, 200);
			ctx.lineTo(50, 200);
			ctx.lineTo(250, 200);
			ctx.stroke();
			ctx.closePath();

			//Pivot and centre
			pointjoin(o, a, ctx, "#0885d8", 5);
			pointjoin(o, b, ctx, "#0885d8", 5);
			pointdisp(b, ctx, m + 7, '#8e020c', '#8e020c');
			pointdisp(a, ctx, m + 7, '#8e020c', '#8e020c');
			pointjoin(z, y, ctx, "#181819", 20);
			pointjoin(c, d, ctx, "#181819", 5);
			pointjoin(c, e, ctx, "#0885d8", 5);
			pointjoin(c, f, ctx, "#0885d8", 5);
			pointjoin(c, c1, ctx, "#181819", 15);
			pointjoin(c, c2, ctx, "#181819", 15);
			pointdisp(f, ctx, m + 7, '#8e020c', '#8e020c');
			pointdisp(e, ctx, m + 7, '#8e020c', '#8e020c');
			pointjoin(e, ii, ctx, "#0885d8", 5);
			pointjoin(f, k, ctx, "#0885d8", 5);
			pointjoin(ii, k, ctx, "#e5791b", 20);
			pointjoin(d, l, ctx, "#e5791b", 10);
			pointjoin(v, va, ctx, "#e5791b", 10);
			pointdisp(l, ctx, 6, "", "", '', '', '');
		}
		//This function used for plotting graph
		function drawgraphh() {
			document.getElementById("graph").innerHTML = "";
			if (gr == 0) {
				document.getElementById("cb").checked = true;
				document.getElementById("graph").style.display = "block";
				document.getElementById("eqn").style.display = "block";
				document.getElementById("myImg").style.display = "none";
				document.getElementById("fb").style.display = "none";
				gr = 1;
				for (plott = 130; plott <= 180; plott++) {
					omega1 = (2 * 3.14 * (plott)) / 600;
					h2 = (m + m1) * 9.81 / (omega1 * omega1 * m) * 10;//calculates h value
					datapoints1.push({ x: h2, y: plott });
				}
				drawgraph("graph", datapoints1, "height(mm)", "n(rpm)", colorGraph);//Used graph.ob.js and graph_use.ob.js files plot graph
			}
			else if (gr == 1) {
				document.getElementById("cb").checked = false;
				document.getElementById("graph").style.display = "none";
				document.getElementById("eqn").style.display = "none";
				document.getElementById("myImg").style.display = "block";
				document.getElementById("fb").style.display = "block";
				gr = 0;
				datapoints1.length = 0;//clears the datapoints
			}
		}
		function sliderGraph() {
			document.getElementById("graph").innerHTML = "";
			datapoints1 = [];
			n = $('#nspinner').spinner("value");
			m = $('#massspinner').spinner("value");
			$('#massspinner').spinner("value", m);
			omega = (2 * 3.14 * n) / 600;
			theta = theta + (rotstatus * 0.6 * deg(omega));
			theta = theta % 360;
			if (theta < 0) theta += 360;
			h = (m + m1) * 9.81 / (omega * omega * m);
			for (plott = 130; plott <= 180; plott++) {
				omega1 = (2 * 3.14 * (plott)) / 600;
				h2 = (m + m1) * 9.81 / (omega1 * omega1 * m) * 10;//calculates h value
				datapoints1.push({ x: h2, y: plott });
			}
			if (document.getElementById("cb").checked == true || randCal == 2) {
				drawgraph("graph", datapoints1, "height(mm)", "n(rpm)", colorGraph);
			}//Used graph.ob.js and graph_use.ob.js files plot graph
			else {
				datapoints1 = [];
				document.getElementById("graph").innerHTML = "";
			}
		}
		function printcomment() {
			// document.getElementById('commentboxleft').style.width = '570px';
			document.getElementById('commentboxleft').innerHTML = "<center>s stands for sleeve; change rpm to see the change in height </center>";
			// ignore use of deprecated tag <center> . Code is executed only if printcomment function receives inappropriate commentloc value
		}
		//To set Experiments
		function setExperiments() {
			document.getElementById("simscreen").style.visibility = "hidden";
			document.getElementById("graph").style.display = "none";
			document.getElementById("variables").style.display = "none";
			document.getElementById("myImg").style.display = "none";
			document.getElementById("fb").style.display = "none";
			document.getElementById("eqn").style.display = "none";
			document.getElementById("cb").style.display = "none";
			document.getElementById("sg").style.display = "none";
			document.getElementById("exp").style.display = "inline-block";
			document.getElementById("commentboxleft").innerHTML = "";
			document.getElementById("goToExperiment").style.display = "none";
			document.getElementById("graphbutton").classList.toggle("graphDisabled");
			document.getElementById("graphListItem").classList.toggle("graphDisabled");
			document.getElementById("startExperiment").style.display = "inline-block";
			document.getElementById("goSimulator").style.display = "inline-block";
		}

		function startExperiments() {
			if (!$("input:radio[name='expt']").is(":checked")) {
				document.getElementById('commentboxleft').innerHTML = "You have not selected any experiment";
			}
			else {
				exptSelected = 1;
				document.getElementById("exitExperiment").style.display = "block";
				document.getElementById("resetExperiment").style.display = "block";
				document.getElementById("goSimulator").style.display = "none";
				document.getElementById("startExperiment").style.display = "none";
				selectExperiments();
			}
		}
		//To set questions for calculation and Parts
		function selectExperiments() {
			$("#exp").hide();
			if ($('#calc').is(':checked')) {
				document.getElementById("commentboxleft").innerHTML = "Calculation Selected";
				document.getElementById("simscreen").style.visibility = "visible";
				document.getElementById("variables").style.display = "block";
				randomizeValues();
				varupdate();
				randomizeExperiments();
			}
			else if ($('#gParts').is(':checked')) {
				document.getElementById("commentboxleft").innerHTML = "Identify parts of governor using dropdown";
				document.getElementById("resetExperiment").style.display = "none";
				document.getElementById("partImage").style.display = "block";
				document.getElementById("dropDownSet").style.display = "block";
			}
		}

		//function to randomize calculation experiments
		function randomizeExperiments() {
			randCal = [1, 2, 3][Math.floor(Math.random() * 3)];
			switch (randCal) {
				case 1: calculateHeight();
					break;
				case 2: calculateMass();
					break;
				case 3: calculateRpm();
					break;
			}
		}
		//function to randomize parameter values
		function randomizeValues() {
			n = Math.floor(Math.random() * (130 - 100 + 1)) + 100;
			m = [4, 4.5, 5, 5.5, 6][Math.floor(Math.random() * 3)];
			$('#nspinner').spinner("value", n);
			$('#nslider').slider("value", n);
			$('#massspinner').spinner("value", m);
			$('#massslider').slider("value", m);
			setValuesDisabled();
		}
		//To disable variables
		function setValuesDisabled() {
			$("#nspinner").spinner("disable");
			$("#nslider").slider("disable");
			$("#massspinner").spinner("disable");
			$("#massslider").slider("disable");
			$("#massspinner").spinner("disable");
			$("#massslider").slider("disable");
		}
		//Set questions for height calculation
		function calculateHeight() {
			document.getElementById("variables").style.display = "none";
			$("#mset").show();
			$("#massset").show();
			$("#nset").hide();
			$("#qMass").hide();
			$("#qRpm").hide();
			$("#questionsSet").show();
			$("#qHeight").show();
			// document.getElementById('commentboxleft').style.width = '300px';
			document.getElementById("commentboxleft").innerHTML = "<span style='color:green'>Constant Variables</span>:<br> M = 20kg";
			document.getElementById("commentboxright").innerHTML = "";
		}
		//Set questions for mass calculation
		function calculateMass() {
			document.getElementById("variables").style.display = "none";
			$("#mset").hide();
			$("#massset").hide();
			$("#nset").hide();
			$("#qHeight").hide();
			$("#qRpm").hide();
			$("#questionsSet").show();
			$("#qMass").show();
			gr = 0;
			document.getElementById("graph").style.display = "block";
			document.getElementById("eqn").style.display = "none";
			sliderGraph();
			// document.getElementById('commentboxleft').style.width = '300px';
			document.getElementById("commentboxleft").innerHTML = "<span style='color:green'>Constant Variables</span>:<br>M = 20kg";
			document.getElementById("commentboxright").innerHTML = "";
		}
		//Set questions for rpm calculation
		function calculateRpm() {
			$("#massset").show();
			$("#nset").show();
			$("#mset").hide();
			$("#qMass").hide();
			$("#qHeight").hide();
			$("#questionsSet").show();
			$("#qRpm").show();
			// document.getElementById('commentboxleft').style.width = '300px';
			document.getElementById("commentboxleft").innerHTML = "<span style='color:green'>Constant Variables</span>:<br>M = 20kg";
			document.getElementById("commentboxright").innerHTML = "";
		}
		//To identify parts
		function identifyingParts() {
			document.getElementById("commentboxleft").innerHTML = "Parts of Governor Selected";
		}
		//To exit from experiments
		function exitExperiments() {
			document.getElementById("simscreen").style.visibility = "hidden";
			document.getElementById("graph").style.display = "none";
			document.getElementById("variables").style.display = "none";
			document.getElementById("myImg").style.display = "none";
			document.getElementById("partImage").style.display = "none";
			document.getElementById("dropDownSet").style.display = "none";
			document.getElementById("fb").style.display = "none";
			document.getElementById("eqn").style.display = "none";
			document.getElementById("cb").style.display = "none";
			document.getElementById("sg").style.display = "none";
			document.getElementById("exp").style.display = "inline-block";
			document.getElementById('commentboxright').innerHTML = "";
			// document.getElementById('commentboxleft').style.width = '570px';
			document.getElementById("commentboxleft").innerHTML = "";
			document.getElementById("exitExperiment").style.display = "none";
			document.getElementById("resetExperiment").style.display = "none";
			document.getElementById("goToExperiment").style.display = "none";
			// document.getElementById("graphbutton").classList.toggle("graphDisabled");
			// document.getElementById("graphListItem").classList.toggle("graphDisabled");
			document.getElementById("questionsSet").style.display = "none";
			document.getElementById("calcHeight").value = "";
			document.getElementById("calcMass").value = "";
			document.getElementById("calcRpm").value = "";
			document.getElementById("startExperiment").style.display = "inline-block";
			document.getElementById("goSimulator").style.display = "inline-block";
			$("input:radio[name='expt']").prop('checked', false);
			resetValues();
			resetSelect();
		}
		//Back to Simulator
		function goToSimulator() {
			gr = 0;
			exptSelected = 0;
			randCal = 0;
			clearGraph();
			document.getElementById("simscreen").style.visibility = "visible";
			document.getElementById("variables").style.display = "block";
			document.getElementById("myImg").style.display = "block";
			document.getElementById("fb").style.display = "block";
			document.getElementById("cb").style.display = "block";
			document.getElementById("cb").checked = false;
			document.getElementById("sg").style.display = "block";
			document.getElementById("eqn").style.display = "none";
			document.getElementById("partImage").style.display = "none";
			document.getElementById("dropDownSet").style.display = "none";
			document.getElementById("exp").style.display = "none";
			document.getElementById("commentboxleft").innerHTML = "";
			document.getElementById("goToExperiment").style.display = "inline-block";
			document.getElementById("graphbutton").classList.toggle("graphDisabled");
			document.getElementById("graphListItem").classList.toggle("graphDisabled");
			document.getElementById("startExperiment").style.display = "none";
			document.getElementById("exitExperiment").style.display = "none";
			document.getElementById("goSimulator").style.display = "none";
			document.getElementById("questionsSet").style.display = "none";
			document.getElementById("calcHeight").value = "";
			document.getElementById("calcMass").value = "";
			document.getElementById("calcRpm").value = "";
			document.getElementById('commentboxright').innerHTML = "";
			// document.getElementById('commentboxleft').style.width = '570px';
			document.getElementById('commentboxleft').innerHTML = "<center>s stands for shaft; change rpm to see the change in height </center>";
			$("input:radio[name='expt']").prop('checked', false);
			enableVariables();
			resetValues();
		}
		function clearGraph() {
			datapoints1 = [];
			document.getElementById("graph").innerHTML = "";
		}
		function enableVariables() {

			$("#nspinner").spinner("enable");
			$("#nslider").slider("enable");
			$("#massspinner").spinner("enable");
			$("#massslider").slider("enable");
			$("#massspinner").spinner("enable");
			$("#massslider").slider("enable");
			$("#massset").show();
			$("#nset").show();
			$("#mset").show();
		}
		//To evaluate Height
		function evalHeight() {
			
			userHeight = document.getElementById("calcHeight").value;
			randomRpm = n;
			randomOmega = (2 * 3.14 * (randomRpm)) / 600;
			randomHeight = (m + m1) * 9.81 / (randomOmega * randomOmega * m) * 10;//calculates h value
			// console.log(randomHeight-0.05) 
			if (userHeight == randomHeight.toFixed(3) || (userHeight >= (randomHeight - 0.03) && userHeight <= (randomHeight + 0.03))) {
				document.getElementById("hspan").innerHTML = "<span style='color:green'>&#10004;</span>";
			} else {
				document.getElementById("hspan").innerHTML = "<span style='color:red'>&#10008;</span>";
				document.getElementById("commentboxright").innerHTML = "<span style='color:green'>Correct Answer:</span><br>Height(mm) = " + randomHeight.toFixed(3);
			}
		}
		//To evaluate Mass
		function evalMass() {
			
			userMass = document.getElementById("calcMass").value;
			if (userMass == m) {
				document.getElementById("mspan").innerHTML = "<span style='color:green'>&#10004;</span>";
			} else {
				document.getElementById("mspan").innerHTML = "<span style='color:red'>&#10008;</span>";
				document.getElementById("commentboxright").innerHTML = "<span style='color:green'>Correct Answer:</span><br>Mass(kg) = " + m;
			}
		}
		//To evaluate Rpm
		function evalRpm() {
			
			userRpm = document.getElementById("calcRpm").value;
			if (userRpm == n) {
				document.getElementById("rspan").innerHTML = "<span style='color:green'>&#10004;</span>";
			} else {
				document.getElementById("rspan").innerHTML = "<span style='color:red'>&#10008;</span>";
				document.getElementById("commentboxright").innerHTML = "<span style='color:green'>Correct Answer:</span><br>n(rpm) = " + n;
			}
		}
		function resetValues() {
			userHeight = 0;
			userMass = 0;
			userRpm = 0;
			document.getElementById("hspan").innerHTML = "";
			document.getElementById("mspan").innerHTML = "";
			document.getElementById("rspan").innerHTML = "";
			document.getElementById("commentboxright").innerHTML = "";
		}
		function resetExperiments() {
			$("#questionsSet").hide();
			$("#qHeight").hide();
			$("#qMass").hide();
			$("#qRpm").hide();
			$("#massset").hide();
			$("#nset").hide();
			$("#mset").hide();
			document.getElementById("graph").style.display = "none";
			resetValues();
			selectExperiments();
		}
		function evaluateParts(ele) {
			var userSelected = ele.selectedIndex;
			var selectedList = ele.id;
			countSpan = 1;
			switch (ele.id) {
				case "pivot": if (userSelected == dropArray[0]) {
					spanHighlight("dropPivot", "<span style='color:green'>&#10004;</span>", ansSpan0);
				} else {
					spanHighlight("dropPivot", "<span style='color:red'>&#10008;</span>", ansSpan0);
				}
					break;
				case "flyBall": if (userSelected == dropArray[1]) {
					spanHighlight("dropFlyBall", "<span style='color:green'>&#10004;</span>", ansSpan1);
				} else {
					spanHighlight("dropFlyBall", "<span style='color:red'>&#10008;</span>", ansSpan1);
				}
					break;

				case "sleeve": if (userSelected == dropArray[2]) {
					spanHighlight("dropSleeve", "<span style='color:green'>&#10004;</span>", ansSpan2);
				} else {
					spanHighlight("dropSleeve", "<span style='color:red'>&#10008;</span>", ansSpan2);
				}
					break;
				case "spindle": if (userSelected == dropArray[3]) {
					spanHighlight("dropSpindle", "<span style='color:green'>&#10004;</span>", ansSpan3);
				} else {
					spanHighlight("dropSpindle", "<span style='color:red'>&#10008;</span>", ansSpan3);
				}
					document.getElementById("dropSpindle").style.left = "104px";
					break;
				case "connectingRod": if (userSelected == dropArray[4]) {
					spanHighlight("dropConnectingRod", "<span style='color:green'>&#10004;</span>", ansSpan4);
				} else {
					spanHighlight("dropConnectingRod", "<span style='color:red'>&#10008;</span>", ansSpan4);
				}
					document.getElementById("dropConnectingRod").style.left = "27px";
					break;
				case "arm": if (userSelected == dropArray[5]) {
					spanHighlight("dropArm", "<span style='color:green'>&#10004;</span>", ansSpan5);
				} else {
					spanHighlight("dropArm", "<span style='color:red'>&#10008;</span>", ansSpan5);
				}
					document.getElementById("dropArm").style.left = "70px";
					break;

			}

		}
		function resetSelect() {
			document.getElementById("pivot").selectedIndex = "0";
			document.getElementById("flyBall").selectedIndex = "0";
			document.getElementById("connectingRod").selectedIndex = "0";
			document.getElementById("spindle").selectedIndex = "0";
			document.getElementById("sleeve").selectedIndex = "0";
			document.getElementById("arm").selectedIndex = "0";
			document.getElementById("dropSpindle").style.left = "117px";
			document.getElementById("dropConnectingRod").style.left = "38px";
			document.getElementById("dropArm").style.left = "83px";
			ansSpan0.innerHTML = " ";
			ansSpan1.innerHTML = " ";
			ansSpan2.innerHTML = " ";
			ansSpan3.innerHTML = " ";
			ansSpan4.innerHTML = " ";
			ansSpan5.innerHTML = " ";
		}
		function spanHighlight(divTag, ans, ansSpan) {
			ansSpan.innerHTML = " ";
			ansSpan.innerHTML = ans;
			document.getElementById(divTag).appendChild(ansSpan);
		}
	</script>
</body>

</html>